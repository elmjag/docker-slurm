FROM slurmbase
#FROM ubuntu:20.04

# configure supervisord to start all required deamons
COPY supervisord.conf-slurmctl /etc/supervisor/supervisord.conf

RUN mkdir --parents /var/spool/slurmstate
RUN chown slurm:slurm /var/spool/slurmstate


CMD [ "/usr/bin/supervisord", "--nodaemon", "--configuration", "/etc/supervisor/supervisord.conf" ]

